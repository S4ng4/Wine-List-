<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gran Caffè L'Aquila - Wine Dashboard</title>
    <link rel="icon" type="image/png" href="gcaLogo.png">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Simple dashboard styles */
        #dashboard-container { margin: 2em auto; max-width: 900px; padding: 1em; background: #fafafa; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);}
        table { width: 100%; border-collapse: collapse; margin-top: 1em;}
        th, td { padding: 0.7em; border-bottom: 1px solid #eee; text-align: left;}
        th { background: #f0f0f0;}
        .filter-row { margin-bottom: 1em; }
    </style>
</head>
<body>
    <div class="page-container index-page">
        <div class="logo-container">
            <img src="gcaLogo.png" alt="Gran Caffè L'Aquila Logo" class="main-logo">
        </div>
        <div class="content-wrapper">
            <h1 class="main-title">THE DIVINE SIGH</h1>
            <p class="subtitle">DIGITAL WINE LIST DASHBOARD</p>
            <div id="dashboard-container">
                <div class="filter-row">
                    <label for="type-filter">Filter by Type: </label>
                    <select id="type-filter">
                        <option value="">All</option>
                        <option value="ROSSO">Red</option>
                        <option value="BIANCO">White</option>
                        <option value="ROSATO">Rosé</option>
                        <option value="BOLLICINE">Sparkling</option>
                    </select>
                </div>
                <div id="wine-table-container">
                    <!-- Table will be inserted here -->
                </div>
            </div>
        </div>
    </div>
    <script>
    let winesData = [];
    const tableContainer = document.getElementById('wine-table-container');
    const typeFilter = document.getElementById('type-filter');
    function renderTable(filteredWines) {
        if (!filteredWines.length) {
            tableContainer.innerHTML = "<p>No wines found.</p>";
            return;
        }
        tableContainer.innerHTML = `
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Region</th>
                        <th>Year</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    ${filteredWines.map(wine => `
                        <tr>
                            <td>${wine.name || "Unnamed"}</td>
                            <td>${wine.type || ""}</td>
                            <td>${wine.region || ""}</td>
                            <td>${wine.year || ""}</td>
                            <td>${wine.description || ""}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        `;
    }
    typeFilter.addEventListener('change', () => {
        const selectedType = typeFilter.value;
        const filtered = selectedType ? winesData.filter(w => w.type === selectedType) : winesData;
        renderTable(filtered);
    });

    fetch('data/wines.json')
        .then(response => response.json())
        .then(wines => {
            winesData = Array.isArray(wines) ? wines : [];
            renderTable(winesData);
        })
        .catch(err => {
            tableContainer.innerHTML = `<p>Error loading wines: ${err.message}</p>`;
        });
    </script>
</body>
</html>
